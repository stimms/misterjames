<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>They Call Me Mister James</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This is the blog of James Chambers, a senior developer on the .NET stack">
<meta property="og:type" content="website">
<meta property="og:title" content="They Call Me Mister James">
<meta property="og:url" content="http://jameschambers.com/page/16/index.html">
<meta property="og:site_name" content="They Call Me Mister James">
<meta property="og:description" content="This is the blog of James Chambers, a senior developer on the .NET stack">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="They Call Me Mister James">
<meta name="twitter:description" content="This is the blog of James Chambers, a senior developer on the .NET stack">
<meta name="twitter:creator" content="@CanadianJames">
<meta name="twitter:site" content="CanadianJames">
  
  
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="content/avatar.png">
  
  
 <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
 <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>


  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-2868185-6', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  

  
  <script src="//load.sumome.com/" data-sumo-site-id="34f480920bcf5ea13ec1605be65d32e86be89fb7177416fb68c2d2f1939aaa04" async="async"></script>
</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><i class="logo" style="background-image: url(/content/logo_round.png)"></i><span class="site-title">They Call Me Mister James</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/.">Home</a>
        
          <a class="main-nav-link" href="/about/bootstrapping-mvc.html">Boostrapping MVC</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">Testimonials</a>
        
          <a class="main-nav-link" href="/about/genfu.html">GenFu</a>
        
        <a class="main-nav-link main-nav-link-highlight" href="https://hireme.jameschambers.com" target="_blank">Hire Me</a>
      </nav>
      
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="/content/avatar.png"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
      
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://jameschambers.com"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
        
          <td><a class="main-nav-link" href="/.">Home</a></td>
        
          <td><a class="main-nav-link" href="/about/bootstrapping-mvc.html">Boostrapping MVC</a></td>
        
          <td><a class="main-nav-link" href="/archives">Archives</a></td>
        
          <td><a class="main-nav-link" href="/about">Testimonials</a></td>
        
          <td><a class="main-nav-link" href="/about/genfu.html">GenFu</a></td>
        
        <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://jameschambers.com"></form>
        </td>
      </tr>
    </table>
  </div>
</header>

    <div class="outer">
      
        <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <h2 id="name">James Chambers</h2>
      <h3 id="title">Husband, Father, Mentor, Humanitarian &amp; Software Developer</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Canada</span>
      <a id="follow" href="https://twitter.com/canadianjames">FOLLOW</a>
    </div>

    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          
          <td><a href="/CanadianJames" target="_blank" title="twitter"><i class="fa fa-twitter"></i></a></td>
          
          <td><a href="http://github.com/MisterJames" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
          
          <td><a href="/atom.xml" target="_blank" title="rss"><i class="fa fa-rss"></i></a></td>
          
          <td><a href="https://ca.linkedin.com/in/canadianjames" target="_blank" title="linkedin"><i class="fa fa-linkedin"></i></a></td>
          
          <td><a href="https://www.youtube.com/user/CodingMisterJames/" target="_blank" title="youtube"><i class="fa fa-youtube"></i></a></td>
          
        </tr>
      </table>
    </div>
    

    <div class="base-info profile-block">
        <a href="http://aspnetmonsters.com" target="_blank"><img src="/content/monster-james.png"></a>      
    </div>

    <div class="base-info profile-block">
        <a href="https://leanpub.com/bootstrappingmvc" onclick="_gaq.push(['_trackEvent', 'outbound-widget', 'https://leanpub.com/bootstrappingmvc', '\n\n']);">
            <img src="https://s3.amazonaws.com/titlepages.leanpub.com/bootstrappingmvc/medium?1425560219" scale="0">
        </a>
    </div>
        
    
  </div>
</aside>

      
      <section id="main">
      <article id="post-scheduled-jobs-in-windows-azure-web-sites" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/scheduled-jobs-in-windows-azure-web-sites/">Scheduled Jobs in Windows Azure Web Sites</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2014/02/scheduled-jobs-in-windows-azure-web-sites/">
      <time datetime="2014-02-16T05:24:45.000Z" itemprop="datePublished">2014-02-15</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Uncategorized/">Uncategorized</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>Last year I published a pretty good primer on Windows Azure Web Sites (available on Amazon as <a href="http://www.amazon.ca/gp/product/B00E5BI5L6/ref=as_li_qf_sp_asin_tl?ie=UTF8&amp;camp=15121&amp;creative=330641&amp;creativeASIN=B00E5BI5L6&amp;linkCode=as2&amp;tag=chasthelist-20" target="_blank" rel="external">Windows Azure Web Sites</a><img src="http://ir-ca.amazon-adsystem.com/e/ir?t=chasthelist-20&amp;l=as2&amp;o=15&amp;a=B00E5BI5L6" alt=""> ) but the Azure team keeps coming out with new features. This post will walk you through the creation of scheduled jobs on Windows Azure Web Sites.</p>
<h2 id="Tasks_That_Aren_u2019t_Part_of_Your_Web_Site_u2019s_UI"><a href="#Tasks_That_Aren_u2019t_Part_of_Your_Web_Site_u2019s_UI" class="headerlink" title="Tasks That Aren’t Part of Your Web Site’s UI"></a>Tasks That Aren’t Part of Your Web Site’s UI</h2><p>On demand reports are a great feature but don’t give your users as-at reporting. Artifacts from operations on your site can use up disk space. Sometimes, you’d prefer to have a digest of information sent out, rather than a notification on every interesting event.</p>
<p>If you need to run some kind of process on a regular interval a solution might be this handy feature on Azure Web Sites: scheduled jobs. These types of requirements can sometimes be met with BI tools, but might cover any kind of activity which may or may not be associated with data, such as:</p>
<ul>
<li>a nightly report  </li><li>a cleanup script  </li><li>sending an email  </li><li>pushing an SMS message hourly to your phone for new account signups </li>
</ul>
<p>I have a console app for the purpose of this article that I’ve created that runs some reports.&nbsp; You’ll see later similar output as the logs from the cloud-run copy of this application.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image8.png" alt="image" title="image"></p>
<p>Yes, my reports start at 0. Don’t judge, my brothers and sisters.</p>
<p>I’m using an EXE here, but you can use any of the following:</p>
<ul>
<li>Windows CMD (.cmd, .bat or .exe)  </li><li>Node.js (.js)  </li><li>PowerShell (.ps1)  </li><li>PHP Scripts (.php)  </li><li>Python (.py), or  </li><li>Bash (.sh) </li>
</ul>
<p>Your script or executable needs to be in a ZIP file which can also include any other files you need for processing such as configuration, images to embed in email messages, etc.</p>
<h2 id="Configuring_the_Job"><a href="#Configuring_the_Job" class="headerlink" title="Configuring the Job"></a>Configuring the Job</h2><p>Click on the Web Jobs tab in the web site’s dashboard, then click “Add” from the command bar at the bottom of the site or from the dashboard page that loads up.</p>
<p><a href="https://jcblogimages.blob.core.windows.net/img/2014/02/image9.png" target="_blank" rel="external"><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image_thumb1.png" alt="image" title="image"></a></p>
<p>If you haven’t already signed up for the Schedule preview program, you’ll not yet be able to create scheduled jobs, but’s it’s trivial to setup and the link is provided on the Web Job screen.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image10.png" alt="image" title="image"></p>
<p>Follow the link and complete the sign up; it’s a straightforward button click.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image11.png" alt="image" title="image"></p>
<p>With that in place you can continue with creating the job. I wrap up all my needed files into a zip, and then I pick my options on the first page of the job setup:</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image12.png" alt="image" title="image"></p>
<p>Finally, I create my schedule and configure it to run every day for a year:</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image13.png" alt="image" title="image"></p>
<p>Your job is added to the list and then runs on schedule, or you can run it on demand from the command bar. After executing, logs are added to your account:</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image14.png" alt="image" title="image"></p>
<p>Clicking the link brings you to the history of job runs where any console output is available for viewing. Error logs, should any rise, are also saved out here. </p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image15.png" alt="image" title="image"></p>
<p>You can see the output by drilling into the log, which is unsurprisingly similar to what we saw from our console&nbsp; output at the start of this article.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image16.png" alt="image" title="image"></p>
<h2 id="Understanding_Job_Storage_Requirements"><a href="#Understanding_Job_Storage_Requirements" class="headerlink" title="Understanding Job Storage Requirements"></a>Understanding Job Storage Requirements</h2><p>The job ZIP that you create can be up to 200MB and will be stored in your web site’s corresponding file system. Logs are also saved out, albeit in a slightly different path. </p>
<p>Job scripts are saved at: D:\home\site\wwwroot\App_Data\jobs\triggered\JOB_NAME</p>
<p>Job logs are saved out at: D:\home\data\jobs\triggered\JOB_NAME</p>
<p>This is actually really great info to know, because with your job script saved in your application’s App_Data directory, you have the ability to manipulate the configuration files (if any) for your script.</p>
<p>Keep in mind that the storage needs for your jobs are factored into your web site’s storage restrictions, so jobs that generate output need to be monitored to make sure you’re not exceeding your quota.</p>
<h2 id="Getting_at_the_Raw_Files"><a href="#Getting_at_the_Raw_Files" class="headerlink" title="Getting at the Raw Files"></a>Getting at the Raw Files</h2><p>There is a great – and growing – administrative back door called Kudu to your Windows Azure Web Site that you may not be aware of. It helps with all kinds of things like SCM checkin hooks, deployment tasks, or viewing logs. You can reach it at this location:</p>
<blockquote>
<p><a href="http://your_site_name.scm.azurewebsites.net" target="_blank" rel="external">http://your_site_name.scm.azurewebsites.net</a> </p>
</blockquote>
<p>It’s basically the URL that you use to access the host on azurewebsites.net, but you plug in the scm.&nbsp; There is a debug console that gives you the ability to plug away through your files in the Kudu menu.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image17.png" alt="image" title="image"></p>
<h2 id="Wrapping_Up__26amp_3B_Next_Steps"><a href="#Wrapping_Up__26amp_3B_Next_Steps" class="headerlink" title="Wrapping Up &amp; Next Steps"></a>Wrapping Up &amp; Next Steps</h2><p>Windows Azure Web Sites now easily allows you to create and manage jobs that can be executed on demand or on a schedule. You ZIP up your files, feed them into the site and then configure the execution times for each of your scripts through the dashboard for your site.</p>
<p>Now go solve some scheduled job need, and happy coding!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jameschambers.com/2014/02/scheduled-jobs-in-windows-azure-web-sites/" data-id="civldfwh4007qpcyyou9m9wrr" class="article-share-link">Share</a>
      
        <a href="http://jameschambers.com/2014/02/scheduled-jobs-in-windows-azure-web-sites/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Azure-Websites/">Azure Websites</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-my-first-time-a-non-android-developers-tale-of-development-with-xamarin" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/my-first-time-a-non-android-developers-tale-of-development-with-xamarin/">My First Time: A Non-Android Developer’s Tale of Development with Xamarin</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2014/02/my-first-time-a-non-android-developers-tale-of-development-with-xamarin/">
      <time datetime="2014-02-04T09:51:02.000Z" itemprop="datePublished">2014-02-04</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Code-Dive/">Code Dive</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Code-Dive/Develop-Meta/">Develop Meta</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>Even though I largely sit on the Microsoft technology stack, it would be without reason to leave development on other stacks unexplored. The old adage – jack of all trades is a master of none – used to plague me as a younger developer as I tried to get my hands into <em>everything</em> and found it hard to become a master of <em>anything</em>.&nbsp; So, though I’ve kept abreast of what my development brethren on iOS and Android have been up to (and taking much notice of their market share compared to my platform of choice) I have only dabbled to insignificant measure with either.&nbsp; </p>
<p>I would like to give a shout to my buddies Mike and Brad who have entertained me at length with conversations and code comparisons on both iOS and Android, respectively, as I work on Windows Phone.</p>
<p>But there’s a cross-over class now – highly functional, feature-rich and, better still, it’s “native” to the development experience I know and love in Visual Studio.</p>
<p>My previous comparison was quite jagged; the Visual Studio Express SKU for Windows Phone is free and installs with a double click. “Hello World” is literally seconds away, post-installation when you’re cutting a Windows Phone app. But, when I last tried Android development with Eclipse, there were several downloads, patches, a video card update (yes, seriously, for my L502X) and numerous animal sacrifices required to get the development environment and emulator running.&nbsp; And I really like my cat, so that didn’t go so well.</p>
<p>Enter into the mix Xamarin’s solution to building apps, with a twist that .Net developers are going to love.</p>
<h3 id="I_u2019m_Going_to_Need_a_Few_Things"><a href="#I_u2019m_Going_to_Need_a_Few_Things" class="headerlink" title="I’m Going to Need a Few Things"></a>I’m Going to Need a Few Things</h3><p><a href="https://jcblogimages.blob.core.windows.net/img/2014/02/image.png" target="_blank" rel="external"><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image_thumb.png" alt="image" title="image"></a>From the get-go, the Xamarin install experience is smart and well-informed. People still make bad installers in 2014, but I can’t accuse Xamarin of that. Like any good citizen, this one knows what it needs to know to get your PC up-and-running. A quick inventory to avoid downloading the parts you already have, then it’s off to cyberspace to fetch the bits. Grab a coffee.</p>
<p>After pulling about 1.5GB down (thank goodness for fast interwebs) the installer runs without much prompting and preps your box with the goods.</p>
<p>Compared to my last experience? So far, this is aces, baby. Each of the installed target platforms even pops up web pages corresponding to the latest version in the Xamarin Developer Center. No errors, only confirmations. Seamless install.</p>
<p>I open up Visual Studio and from my File –&gt; New Project experience I get this:</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image1.png" alt="image" title="image"></p>
<p>Creating the project gives me a prompt for my Xamarin credentials, which then activates my subscription.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image2.png" alt="image" title="image"></p>
<p>Visual Studio is well equipped to give me the lay of the land through the Solution Explorer. You can see the project layout, look at files that make up the solution and even drill into classes to get at the method level-of-detail. I see some interesting bits and drill in.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image3.png" alt="image" title="image"></p>
<p>I do the most natural thing in the world to any dev familiar with Visual Studio and hit F5. I want to see what this baby does. I get the comically honest message:</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image4.png" alt="image" title="image"></p>
<blockquote>
<p>You are about to launch the MonoForAndroid_API_10 emulator. Google Android emulators are slow. Do you wish to proceed? </p>
</blockquote>
<p>Yes. Yes, I do. <strong>But!!</strong> First I need to make sure that I’m using the correct emulator. In my case I had selected an Ice Cream Sandwich project template, so I needed to update my emulator selection to the MonoForAndroid_API_15 option. On my little 2 core i7 with 8GB RAM, the first-start for the virtual device and deployment took about 8 minutes, so, that previous message about taking a little time to get things going is pretty true. That said, the first run also needs to fire up the emulator, push the SDK out, then install the app and sync the assemblies. Seconds later, I have a working app. Hello World!</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image5.png" alt="image" title="image"></p>
<h2 id="Bells_and_Whistles-_Because_Awesome"><a href="#Bells_and_Whistles-_Because_Awesome" class="headerlink" title="Bells and Whistles. Because Awesome."></a>Bells and Whistles. Because Awesome.</h2><p>I return to the IDE, press the Stop control for the debugger and dig into the code. I set a breakpoint on an interesting line of code and re-run the app.&nbsp; Are you kidding me? Sweet! I’m debugging an Android application in Visual Studio.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image6.png" alt="image" title="image"></p>
<p>That interesting line of code allowed me to assume something given the project structure I had previously seen, so I drilled into the folder called “Resources” where you wouldn’t be too surprised to find a “Layout” folder, followed by a “Main.axml”. Double-clicking this file gave me a well-equipped toolbox and a rich designer with draw and source modes and a convenient device selection for preview purposes.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2014/02/image7.png" alt="image" title="image"></p>
<h2 id="Wrapping_Up"><a href="#Wrapping_Up" class="headerlink" title="Wrapping Up"></a>Wrapping Up</h2><p>“Guess what, Mom, I’m an Android developer!” That right there, that is <strong>not </strong>on the top of the list of phone calls I am going to make in 2014. There’s obviously lots more to familiarize myself with, but this establishes a coherent base: I have a great development experience from a trusted company (Xamarin and Microsoft <a href="http://blog.xamarin.com/microsoft-and-xamarin-partner-globally/" target="_blank" rel="external">announced partnership details</a>) that is <a href="https://xamarin.com/visual-studio" target="_blank" rel="external">winning awards</a> for the work they do, in the best integrated development environment PERIOD working with a language I love.</p>
<p>In the months ahead I’m going to be talking a <em>lot</em> more about Reactive Applications, and one of my goals is to make sure that I’m providing examples for cross-platform experiences. I’m working closely with my good friend <a href="https://twitter.com/stimms" target="_blank" rel="external">Simon Timms</a> to explore concepts related to RA on the Microsoft stack in the <em>back end</em>, but these applications are designed for scale and the reality is that most of your potential client base may exist on a different platform.</p>
<p>Sure, it’s easy to be nervous when you do it for the first time, but then you realize you were likely making a bigger deal out of it than necessary. When you’re well-equipped, there’s really no reason to feel any kind of anxiety over experimentation. Oh, and for the record, I’m still talking about Android development.</p>
<h2 id="Next_Steps"><a href="#Next_Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2><p>I’ll be writing soon on my other adventures, particularly with building out cloud-based solutions. These will really, <em>really</em> scale well to serve as the platform for client apps on all kinds of platforms, Android included. If you want to get in on the mix of things, be sure to prep yourself with the following:</p>
<ol>
<li>Hit the <a href="http://xamarin.com/" target="_blank" rel="external">Xamarin web site</a> and sign up for your trial. #WorthIt.</li>
<li>Get familiar with your target: Android design specs are <a href="http://developer.android.com/design/get-started/principles.html" target="_blank" rel="external">readily available</a>.</li>
<li>Check out the excellent starter community on <a href="http://docs.xamarin.com/" target="_blank" rel="external">Xamarin’s site</a>.&nbsp; Docs, to recipes, to tutorials, and all in the context you choose – xplat or platform-specific.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jameschambers.com/2014/02/my-first-time-a-non-android-developers-tale-of-development-with-xamarin/" data-id="civldfwn800bspcyytff7ol0l" class="article-share-link">Share</a>
      
        <a href="http://jameschambers.com/2014/02/my-first-time-a-non-android-developers-tale-of-development-with-xamarin/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Visual-Studio-2013/">Visual Studio 2013</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-mva-jump-start-windows-azure-web-sites-deep-dive" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/mva-jump-start-windows-azure-web-sites-deep-dive/">MVA Jump Start – Windows Azure Web Sites Deep Dive</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2014/01/mva-jump-start-windows-azure-web-sites-deep-dive/">
      <time datetime="2014-01-01T21:49:00.000Z" itemprop="datePublished">2014-01-01</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Conferences/">Conferences</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Conferences/Develop-Meta/">Develop Meta</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>If you tuned into the MVA Jump Start for Windows Azure Web Sites, you’ll know that we covered a lot of ground in a short period of time. I promised to share all the resources I mentioned and all the code that I shared throughout the day, so here it is!</p>
<h2 id="If_You_Haven_u2019t_Seen_the_Session_u2026"><a href="#If_You_Haven_u2019t_Seen_the_Session_u2026" class="headerlink" title="If You Haven’t Seen the Session…"></a>If You Haven’t Seen the Session…</h2><p>You can watch it on <a href="http://www.microsoftvirtualacademy.com/training-courses/windows-azure-web-sites-deep-dive-jump-start?prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">Microsoft Virtual Academy</a> on demand, then follow along with the resources below.</p>
<h2 id="Know_Thy_Tools"><a href="#Know_Thy_Tools" class="headerlink" title="Know Thy Tools"></a>Know Thy Tools</h2><ul>
<li><a href="http://www.windowsazure.com/en-us/downloads/" target="_blank" rel="external">The Azure SDK</a></li>
<li><a href="http://www.windowsazure.com/en-us/downloads/#cmd-line-tools" target="_blank" rel="external">Command Line Tools</a></li>
<li><a href="http://www.microsoft.com/web/webmatrix/" target="_blank" rel="external">Web Matrix</a></li>
<li><a href="http://www.visualstudio.com/en-us/downloads/" target="_blank" rel="external">Visual Studio</a></li>
<li><a href="http://vswebessentials.com/" target="_blank" rel="external">Web Essentials</a> </li>
</ul>
<h2 id="Continuous_Deployment"><a href="#Continuous_Deployment" class="headerlink" title="Continuous Deployment"></a>Continuous Deployment</h2><ul>
<li><a href="http://www.visualstudio.com/" target="_blank" rel="external">Visual Studio Online</a></li>
<li><a href="http://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="external">GitFlow Workflow Information</a></li>
<li><a href="https://github.com/" target="_blank" rel="external">GitHub</a> </li>
</ul>
<h2 id="Go-Live_Checklist"><a href="#Go-Live_Checklist" class="headerlink" title="Go-Live Checklist"></a>Go-Live Checklist</h2><ul>
<li><a href="http://webdevchecklist.com/" target="_blank" rel="external">Web Developer Checklist</a></li>
<li><a href="https://www.owasp.org/index.php/Cheat_Sheets" target="_blank" rel="external">OWASP Cheat Sheets</a> </li>
</ul>
<h2 id="Lightning_Round"><a href="#Lightning_Round" class="headerlink" title="Lightning Round"></a>Lightning Round</h2><ul>
<li><a href="http://www.asp.net/mvc" target="_blank" rel="external">Asp.Net MVC Framework</a></li>
<li><a href="https://nodejstools.codeplex.com/" target="_blank" rel="external">Node.js Tools for Visual Studio</a></li>
<li><a href="http://www.asp.net/signalr" target="_blank" rel="external">SignalR</a> </li>
</ul>
<h2 id="Also_2C_you_can_get_all_the_code_I_was_demo_u2019ing_here_3A"><a href="#Also_2C_you_can_get_all_the_code_I_was_demo_u2019ing_here_3A" class="headerlink" title="Also, you can get all the code I was demo’ing here:"></a>Also, you can get all the code I was demo’ing here:</h2><blockquote>
<p><a href="https://github.com/MisterJames/MvaAzureWebSites" target="_blank" rel="external">MisterJames on GitHub</a> </p>
</blockquote>
<h2 id="Next_Steps_u2026More_MVA_21"><a href="#Next_Steps_u2026More_MVA_21" class="headerlink" title="Next Steps…More MVA!"></a>Next Steps…More MVA!</h2><p>If you haven’t already done so you can <a href="http://www.microsoftvirtualacademy.com/?prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">register for Microsoft Virtual Academy here</a>. As well, here are some courses I recommend (<a href="http://www.microsoftvirtualacademy.com/training-courses/windows-azure-web-sites-deep-dive-jump-start?prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">along with my session</a>, of course <img src="https://jcblogimages.blob.core.windows.net/img/2014/01/wlEmoticon-winkingsmile.png" alt="Winking smile"> ):</p>
<ul>
<li><a href="http://www.microsoftvirtualacademy.com/training-courses/developing-asp-net-mvc-4-web-applications-jump-start?prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">Developing ASP.NET MVC4 Web Applications Jump Start</a></li>
<li><a href="http://www.microsoftvirtualacademy.com/training-courses/html5-css3-fundamentals-development-for-absolute-beginners?prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">HTML5 &amp; CSS3 Fundamentals: Development for Absolute Beginners</a></li>
<li><a href="http://www.microsoftvirtualacademy.com/training-courses/learn-html5-with-javascript-css3-jumpstart-training?prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">Developing in HTML5 with JavaScript and CSS3 Jump Start</a>*   <a href="http://www.microsoftvirtualacademy.com/training-courses/create-web-apps-with-asp-net?prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">Building Web Apps with ASP.NET Jump Start</a> </li>
</ul>
<p>Cheers, and happy coding!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jameschambers.com/2014/01/mva-jump-start-windows-azure-web-sites-deep-dive/" data-id="civldfwnk00c6pcyyu13846mj" class="article-share-link">Share</a>
      
        <a href="http://jameschambers.com/2014/01/mva-jump-start-windows-azure-web-sites-deep-dive/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Asp-Net-MVC/">Asp.Net MVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Azure-Websites/">Azure Websites</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-windows-azure-web-sites-my-mva-recording-experience-in-redmond" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/windows-azure-web-sites-my-mva-recording-experience-in-redmond/">Windows Azure Web Sites - My MVA Recording Experience in Redmond</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/12/windows-azure-web-sites-my-mva-recording-experience-in-redmond/">
      <time datetime="2013-12-12T11:45:00.000Z" itemprop="datePublished">2013-12-12</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Beyond-Code/">Beyond Code</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Beyond-Code/Conferences/">Conferences</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>Today I had the pleasure and privilege of recording a session – 7 modules altogether – covering Windows Azure Web Sites with <a href="http://www.twitter.com/tejaswiredkar" target="_blank" rel="external">Tejaswi Redkar</a>. The material was for a course <a href="http://www.microsoftvirtualacademy.com/liveevents/windows-azure-web-sites-deep-dive-jump-start#?fbid=iakxSr9rHuj&amp;prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external"><img src="https://jcblogimages.blob.core.windows.net/img/2013/12/image.png" alt="image"></a>provided by Microsoft Virtual Academy and recorded live in front of a virtual audience of nearly 1,000 folks from 82 countries around the world. MVA has over 1.5 million subscribers worldwide, so this was a big audience!</p>
<p>I had excellent support from Sangeeta who lined up our session, a great time with Tej who co-presented with me, and tons of help and feedback from Danny and Garry who produced the whole event and gave us wonderful feedback throughout the whole day. It was a great time and I learned a ton in the process <em>about</em> the process and can’t wait for another opportunity to do another session.</p>
<h2 id="Virtual_Peeps_are_Awesome"><a href="#Virtual_Peeps_are_Awesome" class="headerlink" title="Virtual Peeps are Awesome"></a>Virtual Peeps are Awesome</h2><p>I couldn’t believe the participation from the virtual audience! There were tweets going out almost all day and lots of activity in the chat room. This is a great way to learn, IMO, with other peers asking questions while the session is going on and some great experts on hand to field questions from the viewers while we shelled out the information on WAWS.</p>
<p>Help from the audience came in all kinds of forms. When I asked folks to fill out a survey with me to demonstrate SignalR running in the cloud, we had over 200 responses!</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2013/12/survey.png" alt="survey" title="survey"></p>
<p>Even when I wasn’t asking for help, the viewers were sharp enough (and paying close enough attention!) to catch URLs that were being used and jump into the demos themselves. #Awesomesauce. <img src="https://jcblogimages.blob.core.windows.net/img/2013/12/wlEmoticon-smile.png" alt="Smile"></p>
<p><a href="https://jcblogimages.blob.core.windows.net/img/2013/12/chat.png" target="_blank" rel="external"><img src="https://jcblogimages.blob.core.windows.net/img/2013/12/chat_thumb.png" alt="chat" title="chat"></a></p>
<p>And when things went wrong – we only had one demo that didn’t work! – people were <em>still</em> giving me a hand <em>after</em> the session. I had a Node.js + Mongo DB setup that gave me a 500 when I deployed as one of the last demos of the day, but before I got back to the hotel, someone had found the cure and posted the details – refreshing the page! </p>
<p><a href="https://jcblogimages.blob.core.windows.net/img/2013/12/todo.png" target="_blank" rel="external"><img src="https://jcblogimages.blob.core.windows.net/img/2013/12/todo_thumb.png" alt="todo" title="todo"></a></p>
<h2 id="The_Studio_Staff_Were_a_Treat_to_Work_With"><a href="#The_Studio_Staff_Were_a_Treat_to_Work_With" class="headerlink" title="The Studio Staff Were a Treat to Work With"></a>The Studio Staff Were a Treat to Work With</h2><p>If you’ve seen me present live, you know I’m an animated speaker. It was all I could do to stay in my seat for 6 hours of content! Barry and Danny were the producers/recording engineers who executed the live production and, in a tight space with limited budget, did an awesome job of making Tej and I look like we knew what we were doing. They were a great feedback loop, giving advice, helping us make changes as we went through the day and keeping us on schedule.</p>
<p>As presenters we got to use a couple of ginormous multi-touch screens and had to switch back and forth between the presentation and the slide deck, but Barry and Danny made it look good and I think we avoided blinking screens of fail for the whole day.</p>
<h2 id="The_Microsoft_Campus_is_Pretty_Darn_Cool"><a href="#The_Microsoft_Campus_is_Pretty_Darn_Cool" class="headerlink" title="The Microsoft Campus is Pretty Darn Cool"></a>The Microsoft Campus is Pretty Darn Cool</h2><p>Best part of the experience was walking around knowing that everyone there was smarter than me. Very humbling to get to mix with the folks that develop the tools upon which I make my bread and butter, so I soaked in as much as I could. Lunch at The Commons (actually, I think it was called The Mixer), a lap around the Visitor Center, a trip to the company store and of course getting into the recording studio in downtown Redmond.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2013/12/image1.png" alt="image" title="image"></p>
<p>The Commons (or Mixer?) is a collection of shops, services, food courts and lounge areas for people to relax. There was a live jazz band playing at one end of the building which was pretty cool, and a great selection of eats to choose from.</p>
<p>I was really impressed by how serious they seemed to take environmental responsibility and even nutrition. The cafeteria I had breakfast at had “less” and “more” indicators for all the food items to help people make healthy choices, and everything that you used to eat – cups, lids, plates, even the utensils, were all compostable, and even the bags they went into were compostable. Cool stuff.&nbsp; </p>
<p>And you get a sense about how global and how far reaching the company is. I come from a town of about 40,000 people; the MS Campus has over 40k <em>employees</em> working on the grounds, not counting contractors and visitors. One of the boardrooms that I was in was a designated global security/event response center, where I presume smart people dealing with serious issues might sometimes convene.&nbsp; People from all kinds of cultures and backgrounds are making cool things happen and including folks like me. Pretty darn cool.</p>
<p>## </p>
<p>If you’re really into cars, I suppose visiting the factory where yours was built would be pretty epic. That’s pretty much what I experienced here on this trip, and I can’t wait to come back. Plus, it’s so warm here (compared to the –40 weather I came from!).</p>
<p>Once again, thanks to all who participated in the day’s events, helped with the demos online and made the day a success. I hope you all get a chance to bring some awesome back to your team, wherever you work.</p>
<p>If you want to track down the session on the MVA website, <a href="http://www.microsoftvirtualacademy.com/liveevents/windows-azure-web-sites-deep-dive-jump-start#?fbid=iakxSr9rHuj&amp;prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">check it out here</a>.</p>
<p>Cheers, and happy coding!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jameschambers.com/2013/12/windows-azure-web-sites-my-mva-recording-experience-in-redmond/" data-id="civldfw8q0018pcyy8f702ho1" class="article-share-link">Share</a>
      
        <a href="http://jameschambers.com/2013/12/windows-azure-web-sites-my-mva-recording-experience-in-redmond/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Azure/">Azure</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Azure-Websites/">Azure Websites</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Microsoft/">Microsoft</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-windows-azure-web-sites-on-mva" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/windows-azure-web-sites-on-mva/">Windows Azure Web Sites on MVA</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/12/windows-azure-web-sites-on-mva/">
      <time datetime="2013-12-05T05:19:06.000Z" itemprop="datePublished">2013-12-04</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Conferences/">Conferences</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Conferences/Develop-Meta/">Develop Meta</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>The Windows Azure team has accelerated their deployment cadence, and to be honest, if you happened to look away for nine months, it’s like a whole ‘nother baby to deal with. For those not building solutions on WAWS, you’d be surprised at how much has changed, improved and increased in flexibility.</p>
<p><img src="https://jcblogimages.blob.core.windows.net/img/2013/12/image.png" alt="image" title="image"></p>
<p>I’m privileged to get the chance to break it all down for you with <a href="https://twitter.com/tejaswiredkar" target="_blank" rel="external">Tejaswi Redkar</a>, Director of Worldwide Communities at Microsoft. Join us live on Microsoft Virtual Academy on Thursday, December 12th (<a href="http://www.microsoftvirtualacademy.com/liveevents/windows-azure-web-sites-deep-dive-jump-start#?fbid=iakxSr9rHuj&amp;prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">register here</a>).</p>
<p>We’re bringing something to the table for everyone; for newcomers to WAWS you’ll get a peek at the Azure portal interface and gain a better understanding of the inner workings. Beyond the basic, we dive deep into everything from initial and continuous deployment right through to scaling your site up to support traffic growth. We also look at development <em>off</em> the .Net stack, including Node.js, and show you how to integrate with other aspects of Azure from your site.&nbsp; Here’s the day at a glance:</p>
<ul>
<li>Web Sites Overview</li>
<li>Know Thy Tools</li>
<li>Continuous Deployment</li>
<li>Scaling and Configuration</li>
<li>Go Live Checklist</li>
<li>Case Studies – Scale and Deployment</li>
<li>Lightning Round </li>
</ul>
<p>Hope to catch you at the event…it’s free and easy to <a href="http://www.microsoftvirtualacademy.com/liveevents/windows-azure-web-sites-deep-dive-jump-start#?fbid=iakxSr9rHuj&amp;prid=ca_mvpjc&amp;mtag=MVP4038205" target="_blank" rel="external">attend online</a>!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jameschambers.com/2013/12/windows-azure-web-sites-on-mva/" data-id="civldfw8k0010pcyyozm4jucq" class="article-share-link">Share</a>
      
        <a href="http://jameschambers.com/2013/12/windows-azure-web-sites-on-mva/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Asp-Net-MVC/">Asp.Net MVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Azure-Websites/">Azure Websites</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-working-with-iauthenticationfilter-in-the-mvc-5-framework" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/working-with-iauthenticationfilter-in-the-mvc-5-framework/">Working With IAuthenticationFilter in the MVC 5 Framework</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/11/working-with-iauthenticationfilter-in-the-mvc-5-framework/">
      <time datetime="2013-11-20T05:36:24.000Z" itemprop="datePublished">2013-11-19</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Code-Dive/">Code Dive</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <blockquote>
<p>When implementing a custom authentication filter it’s important to know where in the pipeline your filter is invoked; if your purpose is to prevent unauthorized access to a controller action, be sure to implement your credentials verification early enough in the process. This post walks you through the creation of a basic authentication filter and shows the correct method in which to do the check. Good news: it’s easy! </p>
</blockquote>
<p>We can learn a lot about the new IAuthenticationFilter interface by implementing one and seeing where it fits in the MVC pipeline.&nbsp; Before we get started, let’s first remember that authentication and authorization are separate concerns in your application, so this filter is a welcome little addition. </p>
<p>Authentication is where a user provides credentials to access a resource, whereas authorization allows access to particular resources based on properties of the user’s identity. In previous versions of the MVC Framework we had the AuthorizeAttribute, which could be used to cause a redirect if you were unauthenticated, but it’s also true that it blurred the lines a little around auth &amp; auth.&nbsp; </p>
<h2 id="Creating_a_Basic_Do-Nothing_Filter"><a href="#Creating_a_Basic_Do-Nothing_Filter" class="headerlink" title="Creating a Basic Do-Nothing Filter"></a>Creating a Basic Do-Nothing Filter</h2><p>Now that Authentication can more easily stand alone, the process to implement it is pretty simple:</p>
<ul>
<li>Add a class to your project called NewAuthenticationFilter*   Inherit from ActionFilterAttribute and IAuthenticationFilter</li>
<li>Implement the interface (click on the interface name and press Ctrl+. and hit enter)</li>
<li>Throw a couple of debug statements in so that we can set breakpoints, remembering to add the diagnostics namespace to your using statements </li>
</ul>
<p>Just a few quick side notes on the above code. </p>
<ul>
<li>I usually stick my filters into a Filters folder in my project (or into a separate DLL project to keep them reusable) to try to keep things clean</li>
<li>We inherit from ActionFilterAttribute so that we can use it as an attribute on our actions; just using IAuthenticationFilter isn’t enough</li>
<li>You can implement interface members by clicking on the interface name and pressing Ctrl+. and then tapping Enter </li>
</ul>
<p>Your final class should look like the following:</p>
<p><pre class="csharpcode"><span class="kwrd">public</span> <span class="kwrd">class</span> NewAuthenticationFilter: ActionFilterAttribute, IAuthenticationFilter<br>{<br>    <span class="kwrd">public</span> <span class="kwrd">void</span> OnAuthentication(AuthenticationContext filterContext)<br>    {<br>        Debug.WriteLine(<span class="str">“OnAuthentication”</span>);<br>    }</pre></p>
<pre><code>&lt;span class=&quot;kwrd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kwrd&quot;&gt;void&lt;/span&gt; OnAuthenticationChallenge(AuthenticationChallengeContext filterContext)
{
    Debug.WriteLine(&lt;span class=&quot;str&quot;&gt;&quot;OnAuthenticationChallenge&quot;&lt;/span&gt;);
}
</code></pre><p>}</p>
<style type="text/css">.csharpcode, .csharpcode pre
{
    font-size: small;
    color: black;
    font-family: consolas, "Courier New", courier, monospace;
    background-color: #ffffff;
    /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
    background-color: #f4f4f4;
    width: 100%;
    margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>With that in place, go the the Index action on the HomeController and add the attribute to the method. This will let the events fire as the request is processed. Also, set a breakpoint on the return statement. Your action should look like this:</p>
<p><pre class="csharpcode">[NewAuthenticationFilter]<br><span class="kwrd">public</span> ActionResult Index()<br>{<br>    <span class="kwrd">return</span> View();<br>}</pre></p>
<style type="text/css">.csharpcode, .csharpcode pre
{
    font-size: small;
    color: black;
    font-family: consolas, "Courier New", courier, monospace;
    background-color: #ffffff;
    /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
    background-color: #f4f4f4;
    width: 100%;
    margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>Great! Let’s hit F5 and see what happens:</p>
<ul>
<li>The OnAuthentication method is invoked, press F5 to continue</li>
<li>The action is executed, press F5 to continue</li>
<li>The OnAuthenticationChallenge is called last</li>
</ul>
<p>Perfect, some of how we can use this is now becoming apparent. First of all, it’s important to note that the action can be fully executed before the OnAuthenticationChallenge is executed. This means that if you’re intending on preventing any DB writes or calls to something mutable or executable during the action, you’ll need to implement logic in OnAuthentication method to prevent this (we’ll get to that in a minute).</p>
<p>Second, both methods allow you to evaluate request information and set properties of the response, such as the Result (an ActionResult), but remember that the Action itself has the ability to set some of these properties and might overwrite what you set up in OnAuthentication (which, again, is called before the index action method in our example).</p>
<p>Finally, remember that this is just one part of the pipeline. The Result of the action hasn’t yet been executed when OnAuthenticationChallenge is complete, so something like a View hasn’t been rendered, or a FileResult that would load data from disk hasn’t yet been called.</p>
<h2 id="But_Wait_21_What_is_This_All_For_3F"><a href="#But_Wait_21_What_is_This_All_For_3F" class="headerlink" title="But Wait! What is This All For?"></a>But Wait! What is This All For?</h2><p>I’m so glad you asked. Here’s the thing…Debug statements aren’t that interesting and don’t really show you how this can come into context. The user passes through the above code and our action is executed, as is our result, so the user gets to see whatever they requested come back in their browser. Let’s update our code and take another look at how our application might use this.</p>
<p>An authentication filter doesn’t really do much for us if it’s not, oh, say, <em>filtering for authentication</em>, so let’s start by checking to see if our user is actually presenting some kind of credentials. </p>
<p><pre class="csharpcode"><span class="kwrd">public</span> <span class="kwrd">void</span> OnAuthentication(AuthenticationContext filterContext)<br>{<br>    <span class="kwrd">if</span> (!filterContext.Principal.Identity.IsAuthenticated)<br>        filterContext.Result = <span class="kwrd">new</span> HttpUnauthorizedResult();<br>}</pre></p>
<style type="text/css">.csharpcode, .csharpcode pre
{
    font-size: small;
    color: black;
    font-family: consolas, "Courier New", courier, monospace;
    background-color: #ffffff;
    /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
    background-color: #f4f4f4;
    width: 100%;
    margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<style type="text/css">.csharpcode, .csharpcode pre
{
    font-size: small;
    color: black;
    font-family: consolas, "Courier New", courier, monospace;
    background-color: #ffffff;
    /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
    background-color: #f4f4f4;
    width: 100%;
    margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>This is the most basic form of a check. “The identity of the principal is not authenticated, so set the result to unauthorized, an HTTP 401 status code.” Now we’re cooking with peanut oil and our 401 will not let the user access the action until they satisfy whatever arguments you’d like them to fulfill.&nbsp; To that end, you don’t <em>only</em> need to use the principal identity, you can use whatever you like, such as a tie-in to a third-party SSO provider in a mixed identity environment.</p>
<p>Next, we have to deal with the fact that someone who is unauthenticated tried to access a resource we were protecting. The way the Authorize attribute worked was just by letting that 401 we set above flow through the framework. In an MVC application the default mechanism for authentication is Forms, for which there is a default account controller and corresponding views added to our project. Thus, by simply letting the user “fall through” here, they will end up at the login page.&nbsp; For the following code in your challenge method:</p>
<p><pre class="csharpcode"><span class="kwrd">public</span> <span class="kwrd">void</span> OnAuthenticationChallenge(AuthenticationChallengeContext filterContext)<br>{<br>    <span class="rem">// redirect the user to some form of log in</span><br>}</pre></p>
<style type="text/css">.csharpcode, .csharpcode pre
{
    font-size: small;
    color: black;
    font-family: consolas, "Courier New", courier, monospace;
    background-color: #ffffff;
    /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
    background-color: #f4f4f4;
    width: 100%;
    margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>…the user will keep that 401 state through, and will ultimately be bounced back to the site’s login page.</p>
<p><a href="https://jcblogimages.blob.core.windows.net/img/2013/11/image1.png" target="_blank" rel="external"><img src="https://jcblogimages.blob.core.windows.net/img/2013/11/image_thumb.png" alt="image" title="image"></a></p>
<p>So, in it’s simplest form as we’ve done above, authentication filters give us a way to remove Authorize attributes (separation of concerns) and mimic the behavior we were previously leveraging to force users to log in. But there’s more, right?</p>
<h2 id="Practical_Uses_of_Our_New_Custom_Authentication_Bestie"><a href="#Practical_Uses_of_Our_New_Custom_Authentication_Bestie" class="headerlink" title="Practical Uses of Our New Custom Authentication Bestie"></a>Practical Uses of Our New Custom Authentication Bestie</h2><p>We get pretty good support with the Authorize attribute and our ability to create custom filters already, but if we agree that separation of concerns is important, we get a few benefits with the new Authentication filters and the timing with which their methods are fired.</p>
<p>### </p>
<h3 id="Isolated_Custom_Authentication"><a href="#Isolated_Custom_Authentication" class="headerlink" title="Isolated Custom Authentication"></a>Isolated Custom Authentication</h3><p>One of the first possibilities is that you can now setup an action or controller to have a custom authentication mechanism, rather than using whatever the default is for the site. If you have an external provider (perhaps something legacy) that you can proxy credentials to, this might be one way you could approach this.</p>
<h3 id="Customizing_UI_For_Login"><a href="#Customizing_UI_For_Login" class="headerlink" title="Customizing UI For Login"></a>Customizing UI For Login</h3><p>There may be some cases where you want to do something like augment credentials, or perhaps configure part of the application, or even let users log in with a single-use code. OnAuthenticationChallenge lets you configure the result, so you can route the user to whatever view you like in your application.</p>
<p>## </p>
<h2 id="Things_to_Remember"><a href="#Things_to_Remember" class="headerlink" title="Things to Remember"></a>Things to Remember</h2><p>I actually don’t have a lot of caveats to suggest here, but perhaps the most important bit to remember is that if you IAuthenticationFilter.OnAuthenticate fall through without a 401, you’re letting the user into the action. Your OnAuthenticateChallenge will still fire, but remember from the breakpoints set above (when we were just spitting out debug lines) that the action <em>will</em> fire and your code _will _be executed. Logging the user in at this point happens after the invocation…a worst case scenario would be on a POST where an update is happening.</p>
<p>Finally, remember that Authentication wraps Authorization and action execution, and the Authenticate method precedes your first opportunity to interact with the request pipeline when you use ActionFilterAttribute inheritance on its own.</p>
<h2 id="Next_Steps"><a href="#Next_Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2><p>It’s pretty easy to try this out! Why not give the following a try?</p>
<ul>
<li>File –&gt; New –&gt; Project and give the exercise above a try</li>
<li>Think of other uses or scenarios where one could leverage this</li>
<li>Break out your custom authentication filters built on the old objects in older versions of the MVC Framework</li>
</ul>
<p>Happy coding!</p>
<p>_Thanks to good friend <a href="https://twitter.com/Dave_Paquette" target="_blank" rel="external">David Paquette</a> who reviewed and suggested updates on this post._</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jameschambers.com/2013/11/working-with-iauthenticationfilter-in-the-mvc-5-framework/" data-id="civldfw80000apcyyzprom69p" class="article-share-link">Share</a>
      
        <a href="http://jameschambers.com/2013/11/working-with-iauthenticationfilter-in-the-mvc-5-framework/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Asp-Net-MVC/">Asp.Net MVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Visual-Studio-2013/">Visual Studio 2013</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/15/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/17/">Next &raquo;</a>
      </nav>
    </section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">recent</h3>
    <div class="widget">
      <ul id="recent-post" class="no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-title"><a href="/2016/11/Fan-out-workloads-in-Azure-Function-Apps/" class="title">Fan out workloads in Azure Function Apps</a></p>
              <p class="item-date"><time datetime="2016-11-16T12:51:32.000Z" itemprop="datePublished">2016-11-16</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-title"><a href="/2016/11/Resizing-Images-Using-Azure-Functions/" class="title">How to Resize Images Uploaded to Blob Storage with Azure Functions</a></p>
              <p class="item-date"><time datetime="2016-11-15T13:04:26.000Z" itemprop="datePublished">2016-11-15</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-title"><a href="/2016/11/How-to-organize-types-in-your-scripts/" class="title">How to organize types in your Azure Function scripts</a></p>
              <p class="item-date"><time datetime="2016-11-14T13:00:00.000Z" itemprop="datePublished">2016-11-14</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-title"><a href="/2016/11/Five-Days-of-Azure-Functions/" class="title">Five Days of Azure Functions</a></p>
              <p class="item-date"><time datetime="2016-11-11T21:03:50.000Z" itemprop="datePublished">2016-11-11</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-title"><a href="/2016/09/Bending-ASP-NET-MVC-Core-To-Your-Will/" class="title">Bending ASP.NET Core MVC To Your Will</a></p>
              <p class="item-date"><time datetime="2016-09-09T17:46:34.000Z" itemprop="datePublished">2016-09-09</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Buy me a coffee?</h3>
    <div class="widget">
        <a href="https://www.paypal.me/jameschambers/3.5usd" target="_blank"><img src="/content/coffee.png"></a>
    </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">tag cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/30DaysMvcBootstrap/" style="font-size: 17.86px;">30DaysMvcBootstrap</a> <a href="/tags/5-days-of-Azure-Functions/" style="font-size: 12.14px;">5 days of Azure Functions</a> <a href="/tags/8DaysOfTableStorage/" style="font-size: 11.43px;">8DaysOfTableStorage</a> <a href="/tags/ASP-NET/" style="font-size: 15px;">ASP.NET</a> <a href="/tags/ASP-NET-5/" style="font-size: 10.71px;">ASP.NET 5</a> <a href="/tags/ASP-NET-Core/" style="font-size: 12.86px;">ASP.NET Core</a> <a href="/tags/ASP-NET-Core-MVC/" style="font-size: 10px;">ASP.NET Core MVC</a> <a href="/tags/ActionFilters/" style="font-size: 10px;">ActionFilters</a> <a href="/tags/AllReady/" style="font-size: 10px;">AllReady</a> <a href="/tags/Android/" style="font-size: 10.71px;">Android</a> <a href="/tags/AngelaSmith/" style="font-size: 10px;">AngelaSmith</a> <a href="/tags/Asp-Net-MVC/" style="font-size: 20px;">Asp.Net MVC</a> <a href="/tags/Authentication/" style="font-size: 10.71px;">Authentication</a> <a href="/tags/Azure/" style="font-size: 17.14px;">Azure</a> <a href="/tags/Azure-Functions/" style="font-size: 12.14px;">Azure Functions</a> <a href="/tags/Azure-Web-Apps/" style="font-size: 10px;">Azure Web Apps</a> <a href="/tags/Azure-Websites/" style="font-size: 13.57px;">Azure Websites</a> <a href="/tags/BUILD/" style="font-size: 10px;">BUILD</a> <a href="/tags/BitBucket/" style="font-size: 10px;">BitBucket</a> <a href="/tags/Bootstrap/" style="font-size: 15.71px;">Bootstrap</a> <a href="/tags/CTT-NUG/" style="font-size: 10px;">CTT .NUG</a> <a href="/tags/Calgary/" style="font-size: 10px;">Calgary</a> <a href="/tags/Cisco-VPN/" style="font-size: 10px;">Cisco VPN</a> <a href="/tags/ClearMeasure/" style="font-size: 10.71px;">ClearMeasure</a> <a href="/tags/CodeProject/" style="font-size: 11.43px;">CodeProject</a> <a href="/tags/Conferences/" style="font-size: 10.71px;">Conferences</a> <a href="/tags/CouchDb/" style="font-size: 10px;">CouchDb</a> <a href="/tags/DNX/" style="font-size: 10px;">DNX</a> <a href="/tags/Dojo/" style="font-size: 10px;">Dojo</a> <a href="/tags/Email/" style="font-size: 10px;">Email</a> <a href="/tags/Entity-Framework/" style="font-size: 13.57px;">Entity Framework</a> <a href="/tags/Extension-Methods/" style="font-size: 10px;">Extension Methods</a> <a href="/tags/FontAwesome/" style="font-size: 10.71px;">FontAwesome</a> <a href="/tags/GenFu/" style="font-size: 10px;">GenFu</a> <a href="/tags/GetManifestResourceStream/" style="font-size: 10px;">GetManifestResourceStream</a> <a href="/tags/Git/" style="font-size: 11.43px;">Git</a> <a href="/tags/HTML5/" style="font-size: 10px;">HTML5</a> <a href="/tags/HackAThon/" style="font-size: 10px;">HackAThon</a> <a href="/tags/HtmlHelper/" style="font-size: 10px;">HtmlHelper</a> <a href="/tags/IIS/" style="font-size: 10px;">IIS</a> <a href="/tags/JSON/" style="font-size: 10.71px;">JSON</a> <a href="/tags/Keynote/" style="font-size: 10px;">Keynote</a> <a href="/tags/Life-Hack/" style="font-size: 10px;">Life Hack</a> <a href="/tags/Life-Hacking/" style="font-size: 10.71px;">Life Hacking</a> <a href="/tags/Life-Hacks/" style="font-size: 12.86px;">Life Hacks</a> <a href="/tags/Linq/" style="font-size: 10px;">Linq</a> <a href="/tags/MIX11/" style="font-size: 10px;">MIX11</a> <a href="/tags/MVA/" style="font-size: 10.71px;">MVA</a> <a href="/tags/MVC/" style="font-size: 19.29px;">MVC</a> <a href="/tags/MVC5/" style="font-size: 18.57px;">MVC5</a> <a href="/tags/MVC6/" style="font-size: 13.57px;">MVC6</a> <a href="/tags/MVP/" style="font-size: 10px;">MVP</a> <a href="/tags/Make-Code-Not-War/" style="font-size: 10px;">Make Code Not War</a> <a href="/tags/MeasureUp/" style="font-size: 10px;">MeasureUp</a> <a href="/tags/Metro/" style="font-size: 10px;">Metro</a> <a href="/tags/Microsoft/" style="font-size: 10px;">Microsoft</a> <a href="/tags/Microsoft-Band/" style="font-size: 12.14px;">Microsoft Band</a> <a href="/tags/Mobile/" style="font-size: 10px;">Mobile</a> <a href="/tags/Mobile-Services/" style="font-size: 10px;">Mobile Services</a> <a href="/tags/Motivate/" style="font-size: 10px;">Motivate</a> <a href="/tags/MvcScaffolding/" style="font-size: 11.43px;">MvcScaffolding</a> <a href="/tags/Not-Coding-At-All/" style="font-size: 10px;">Not Coding At All</a> <a href="/tags/NuGet/" style="font-size: 15px;">NuGet</a> <a href="/tags/OData/" style="font-size: 10px;">OData</a> <a href="/tags/PayPal/" style="font-size: 10px;">PayPal</a> <a href="/tags/PostSharp/" style="font-size: 10px;">PostSharp</a> <a href="/tags/Practice/" style="font-size: 10.71px;">Practice</a> <a href="/tags/Practice-of-Awesome/" style="font-size: 10px;">Practice of Awesome</a> <a href="/tags/PrairieDevCon/" style="font-size: 16.43px;">PrairieDevCon</a> <a href="/tags/Queues/" style="font-size: 10px;">Queues</a> <a href="/tags/REST/" style="font-size: 10px;">REST</a> <a href="/tags/Radio/" style="font-size: 10px;">Radio</a> <a href="/tags/Razor/" style="font-size: 10.71px;">Razor</a> <a href="/tags/Real-Life/" style="font-size: 10px;">Real Life</a> <a href="/tags/Regina/" style="font-size: 10.71px;">Regina</a> <a href="/tags/Remote-Work/" style="font-size: 11.43px;">Remote Work</a> <a href="/tags/Resolve/" style="font-size: 10px;">Resolve</a> <a href="/tags/Rock-Paper-Scissors/" style="font-size: 10px;">Rock Paper Scissors</a> <a href="/tags/Routing/" style="font-size: 10px;">Routing</a> <a href="/tags/Ruby-on-Rails/" style="font-size: 10px;">Ruby on Rails</a> <a href="/tags/SDEC/" style="font-size: 10px;">SDEC</a> <a href="/tags/SOAP/" style="font-size: 10px;">SOAP</a> <a href="/tags/SQL-Server/" style="font-size: 10px;">SQL Server</a> <a href="/tags/ServiceBus/" style="font-size: 10px;">ServiceBus</a> <a href="/tags/SignalR/" style="font-size: 11.43px;">SignalR</a> <a href="/tags/Speaking/" style="font-size: 11.43px;">Speaking</a> <a href="/tags/TFS/" style="font-size: 10px;">TFS</a> <a href="/tags/Table-Storage/" style="font-size: 10.71px;">Table Storage</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Unit-Testing/" style="font-size: 10px;">Unit Testing</a> <a href="/tags/Visual-Studio/" style="font-size: 10.71px;">Visual Studio</a> <a href="/tags/Visual-Studio-11/" style="font-size: 11.43px;">Visual Studio 11</a> <a href="/tags/Visual-Studio-2010/" style="font-size: 16.43px;">Visual Studio 2010</a> <a href="/tags/Visual-Studio-2012/" style="font-size: 12.86px;">Visual Studio 2012</a> <a href="/tags/Visual-Studio-2013/" style="font-size: 10.71px;">Visual Studio 2013</a> <a href="/tags/Visual-Studio-2015/" style="font-size: 15.71px;">Visual Studio 2015</a> <a href="/tags/WCF/" style="font-size: 10.71px;">WCF</a> <a href="/tags/Web-API/" style="font-size: 11.43px;">Web API</a> <a href="/tags/Web-Development/" style="font-size: 10px;">Web Development</a> <a href="/tags/Web-Services/" style="font-size: 10.71px;">Web Services</a> <a href="/tags/Windows-8/" style="font-size: 11.43px;">Windows 8</a> <a href="/tags/Windows-Azure/" style="font-size: 10px;">Windows Azure</a> <a href="/tags/Windows-Phone/" style="font-size: 14.29px;">Windows Phone</a> <a href="/tags/Windws-Live-Writer/" style="font-size: 10px;">Windws Live Writer</a> <a href="/tags/Winnipeg/" style="font-size: 10.71px;">Winnipeg</a> <a href="/tags/c/" style="font-size: 13.57px;">c#</a> <a href="/tags/compiling/" style="font-size: 10px;">compiling</a> <a href="/tags/jQuery/" style="font-size: 12.14px;">jQuery</a> <a href="/tags/jQuery-UI/" style="font-size: 10.71px;">jQuery UI</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/open-source/" style="font-size: 10.71px;">open source</a> <a href="/tags/reflection/" style="font-size: 10px;">reflection</a> <a href="/tags/seed-data/" style="font-size: 10px;">seed data</a> <a href="/tags/testing/" style="font-size: 10px;">testing</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/">2014</a><span class="archive-list-count">42</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/">2012</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">2011</a><span class="archive-list-count">36</span></li></ul>
    </div>
  </div>

  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 1999 - 2016 James Chambers<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script>
  var disqus_shortname = 'jameschambers';
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>